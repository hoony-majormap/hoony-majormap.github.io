<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project 45: ë‚˜ë§Œì˜ ë¯¸ë˜ ì‡¼í•‘ëª°</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM & Babel -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Lucide Icons (CDN) -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        /* ì»¤ìŠ¤í…€ ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° ë“± ì¶”ê°€ ìŠ¤íƒ€ì¼ */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        @keyframes slide-down {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-slide-down {
            animation: slide-down 0.5s ease-out forwards;
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(-5%); }
            50% { transform: translateY(0); }
        }
        .animate-bounce {
            animation: bounce 1s infinite;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // Lucide ì•„ì´ì½˜ ì»´í¬ë„ŒíŠ¸ ë˜í¼ (CDN ë²„ì „ì˜ lucide ê°ì²´ë¥¼ React ì»´í¬ë„ŒíŠ¸ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•¨)
        const IconWrapper = ({ name, size = 24, className, fill = "none" }) => {
            const iconRef = React.useRef(null);
            
            React.useEffect(() => {
                if (window.lucide) {
                    window.lucide.createIcons({
                        root: iconRef.current,
                        name: name,
                        attrs: {
                            width: size,
                            height: size,
                            class: className,
                            fill: fill,
                            stroke: "currentColor"
                        }
                    });
                }
            }, [name, size, className, fill]);

            return <i ref={iconRef} data-lucide={name} className={className}></i>;
        };

        // ì•„ì´ì½˜ë“¤ì„ ì»´í¬ë„ŒíŠ¸ë¡œ ì •ì˜
        const ShoppingCart = (props) => <IconWrapper name="shopping-cart" {...props} />;
        const Car = (props) => <IconWrapper name="car" {...props} />;
        const Home = (props) => <IconWrapper name="home" {...props} />;
        const Plane = (props) => <IconWrapper name="plane" {...props} />;
        const Calculator = (props) => <IconWrapper name="calculator" {...props} />;
        const Briefcase = (props) => <IconWrapper name="briefcase" {...props} />;
        const CheckCircle = (props) => <IconWrapper name="check-circle" {...props} />;
        const ArrowRight = (props) => <IconWrapper name="arrow-right" {...props} />;
        const ArrowLeft = (props) => <IconWrapper name="arrow-left" {...props} />;
        const RefreshCw = (props) => <IconWrapper name="refresh-cw" {...props} />;
        const User = (props) => <IconWrapper name="user" {...props} />;
        const DollarSign = (props) => <IconWrapper name="dollar-sign" {...props} />;
        const Heart = (props) => <IconWrapper name="heart" {...props} />;
        const Zap = (props) => <IconWrapper name="zap" {...props} />;

        // --- ë°ì´í„° ì„¸íŠ¸ (Data Mockup) ---

        // 1. ì£¼ê±° ì˜µì…˜
        const HOUSING_OPTIONS = [
            { id: 'h1', title: 'í•œê°• ë·° ì•„íŒŒíŠ¸', price: 2500000000, monthlyCost: 850, img: 'ğŸ¢', desc: 'ì„œìš¸ì˜ ëœë“œë§ˆí¬, ì„±ê³µì˜ ìƒì§•' },
            { id: 'h2', title: 'íŒêµ íƒ€ìš´í•˜ìš°ìŠ¤', price: 1200000000, monthlyCost: 450, img: 'ğŸ¡', desc: 'ë§ˆë‹¹ì´ ìˆëŠ” ì—¬ìœ ë¡œìš´ ì‚¶' },
            { id: 'h3', title: 'ì—­ì„¸ê¶Œ ì‹ ì¶• ë¹Œë¼', price: 500000000, monthlyCost: 200, img: 'ğŸ™ï¸', desc: 'ì‹¤ì† ìˆê³  í¸ë¦¬í•œ ë„ì‹œ ìƒí™œ' },
            { id: 'h4', title: 'ë‚­ë§Œ ê°€ë“ ìº í•‘ì¹´', price: 100000000, monthlyCost: 50, img: 'ğŸš', desc: 'ì „êµ­ì´ ë‚˜ì˜ ì§‘, ììœ ë¡œìš´ ì˜í˜¼' },
        ];

        // 2. ì°¨ëŸ‰ ì˜µì…˜
        const CAR_OPTIONS = [
            { id: 'c1', title: 'ìŠˆí¼ì¹´ (í¬ë¥´ì‰ê¸‰)', monthlyCost: 250, img: 'ğŸï¸', desc: 'í•˜ì°¨ê° 1ìœ„, ë„ë¡œì˜ ì£¼ì¸ê³µ' },
            { id: 'c2', title: 'íŒ¨ë°€ë¦¬ SUV', monthlyCost: 100, img: 'ğŸš™', desc: 'ê°€ì¡± ì—¬í–‰ì— ë”±, ì•ˆì „í•˜ê³  íŠ¼íŠ¼í•¨' },
            { id: 'c3', title: 'ì¹œí™˜ê²½ ì „ê¸°ì°¨', monthlyCost: 60, img: 'ğŸ”‹', desc: 'ìœ ì§€ë¹„ ì ˆì•½í•˜ê³  ì§€êµ¬ë„ ì§€í‚´' },
            { id: 'c4', title: 'ëŒ€ì¤‘êµí†µ/ë”°ë¦‰ì´', monthlyCost: 10, img: 'ğŸš²', desc: 'ê°€ì¥ í•©ë¦¬ì ì¸ ì„ íƒ, ìš´ë™ì€ ë¤' },
        ];

        // 3. ë¼ì´í”„ìŠ¤íƒ€ì¼
        const LIFE_LEVELS = [
            { level: 1, label: 'ì•Œëœ°ì‚´ëœ°í˜•', monthlyCost: 80, desc: 'ì§‘ë°¥ ëŸ¬ë²„, ë„·í”Œë¦­ìŠ¤ ì·¨ë¯¸' },
            { level: 2, label: 'ì†Œí™•í–‰í˜•', monthlyCost: 150, desc: 'ê°€ë” í˜¸ìº‰ìŠ¤, ë§›ì§‘ íƒë°©' },
            { level: 3, label: 'í”Œë ‰ìŠ¤í˜•', monthlyCost: 300, desc: 'ì—° 2íšŒ í•´ì™¸ì—¬í–‰, ë§¤ì£¼ ì˜¤ë§ˆì¹´ì„¸' },
        ];

        // 4. ì§ì—… ë°ì´í„°ë² ì´ìŠ¤
        const JOB_DATA = [
            { 
                id: 'j1', name: 'AI ë°ì´í„° ì‚¬ì´ì–¸í‹°ìŠ¤íŠ¸', 
                type: 'logic', style: 'focus', 
                minSal: 6000, maxSal: 15000, 
                desc: 'ì„¸ìƒì˜ íë¦„ì„ ë°ì´í„°ë¡œ ì½ì–´ë‚´ëŠ” 21ì„¸ê¸°ì˜ ì˜ˆì–¸ê°€',
                missions: ['ê´€ì‹¬ ìˆëŠ” ì•„ì´ëŒ/ê²Œì„ ìˆœìœ„ë¥¼ ì—‘ì…€ë¡œ ì •ë¦¬í•´ë³´ê¸°', 'ì¼ì£¼ì¼ ìš©ëˆ ì§€ì¶œ ë‚´ì—­ ê·¸ë˜í”„ ê·¸ë¦¬ê¸°'] 
            },
            { 
                id: 'j2', name: 'ê¸€ë¡œë²Œ ë§ˆì¼€í„°', 
                type: 'social', style: 'people', 
                minSal: 5000, maxSal: 12000, 
                desc: 'ì‚¬ëŒì˜ ë§ˆìŒì„ ì›€ì§ì—¬ ìƒí’ˆì„ íŒŒëŠ” ì‹¬ë¦¬ ì „ëµê°€',
                missions: ['ë‹¹ê·¼ë§ˆì¼“ì— ì•ˆ ì“°ëŠ” ë¬¼ê±´ íŒë§¤ê¸€ ë§¤ë ¥ì ìœ¼ë¡œ ì¨ë³´ê¸°', 'ì¹œêµ¬ 3ëª…ì—ê²Œ ì¢‹ì•„í•˜ëŠ” ê°„ì‹ ì„¤ë¬¸ì¡°ì‚¬í•˜ê¸°'] 
            },
            { 
                id: 'j3', name: 'ì›¹íˆ°/ì½˜í…ì¸  ì‘ê°€', 
                type: 'art', style: 'creative', 
                minSal: 3500, maxSal: 20000, 
                desc: 'ìƒìƒ ì†ì˜ ì´ì•¼ê¸°ë¥¼ í˜„ì‹¤ë¡œ ë§Œë“œëŠ” ì°½ì¡°ì£¼',
                missions: ['4ì»· ë§Œí™” ê·¸ë ¤ì„œ ì¹œêµ¬ì—ê²Œ ë³´ì—¬ì£¼ê¸°', 'ì¢‹ì•„í•˜ëŠ” ìœ íŠœë¸Œ ì˜ìƒì˜ ì¬ë¯¸ í¬ì¸íŠ¸ 3ê°€ì§€ ì ê¸°'] 
            },
            { 
                id: 'j4', name: 'ì¹œí™˜ê²½ ê±´ì¶•ê°€', 
                type: 'tech', style: 'make', 
                minSal: 5500, maxSal: 13000, 
                desc: 'ìì—°ê³¼ ì‚¬ëŒì´ í•¨ê»˜ ì‚¬ëŠ” ê³µê°„ì„ ì§“ëŠ” ì˜ˆìˆ ê°€',
                missions: ['ë‚´ ë°© ê°€êµ¬ ë°°ì¹˜ë¥¼ ìƒˆë¡­ê²Œ ê·¸ë ¤ë³´ê¸°', 'ë ˆê³ ë‚˜ ìƒìë¡œ ë¯¸ë˜ì˜ ì§‘ ë§Œë“¤ì–´ë³´ê¸°'] 
            },
            { 
                id: 'j5', name: 'ê¸ˆìœµ ìì‚°ìš´ìš©ì‚¬', 
                type: 'logic', style: 'focus', 
                minSal: 7000, maxSal: 30000, 
                desc: 'ëˆì˜ íë¦„ì„ ì½ì–´ ê±°ëŒ€í•œ ë¶€ë¥¼ ë§Œë“œëŠ” ê¸ˆìœµ ì „ë¬¸ê°€',
                missions: ['ëª¨ì˜ ì£¼ì‹ íˆ¬ì ê²Œì„ í•´ë³´ê¸°', 'í™˜ìœ¨ì´ ì˜¤ë¥´ë©´ ì¢‹ì€ ì  ì°¾ì•„ë³´ê¸°'] 
            },
            { 
                id: 'j6', name: 'ì‘ê¸‰ì˜í•™ê³¼ ì˜ì‚¬', 
                type: 'tech', style: 'people', 
                minSal: 12000, maxSal: 30000, 
                desc: 'ê°€ì¥ ê¸´ë°•í•œ ìˆœê°„ì— ìƒëª…ì„ êµ¬í•˜ëŠ” íˆì–´ë¡œ',
                missions: ['ì‹¬íì†Œìƒìˆ (CPR) ì˜ìƒ ë³´ê³  ë”°ë¼í•´ë³´ê¸°', 'ì¸ì²´ ëª¨í˜•ë„ ê·¸ë ¤ë³´ê³  ì¥ê¸° ìœ„ì¹˜ ìµíˆê¸°'] 
            }
        ];

        // --- ë©”ì¸ ì»´í¬ë„ŒíŠ¸ ---
        function Project45() {
            const [step, setStep] = useState('intro');
            const [user, setUser] = useState({ name: '', house: null, car: null, life: 1 });
            const [result, setResult] = useState({ monthlyNeed: 0, yearNeed: 0 });
            const [selectedJob, setSelectedJob] = useState(null);

            useEffect(() => {
                if (window.lucide) {
                    window.lucide.createIcons();
                }
            });

            const getProgress = () => {
                switch(step) {
                    case 'intro': return 0;
                    case 'dream': return 30;
                    case 'receipt': return 60;
                    case 'match': return 80;
                    case 'mission': return 100;
                    default: return 0;
                }
            };

            const calculateCost = () => {
                if (!user.house || !user.car) return;

                const houseCost = user.house.monthlyCost;
                const carCost = user.car.monthlyCost;
                const lifeCost = LIFE_LEVELS[user.life - 1].monthlyCost;
                const savingCost = 100; 

                const totalMonthly = houseCost + carCost + lifeCost + savingCost;
                let taxMultiplier = totalMonthly > 800 ? 1.5 : 1.3;
                const totalYearly = Math.round((totalMonthly * 12 * taxMultiplier) / 100) * 100; 

                setResult({
                    monthlyNeed: totalMonthly,
                    yearNeed: totalYearly
                });
                setStep('receipt');
            };

            return (
                <div className="min-h-screen bg-gray-50 font-sans text-gray-800 flex justify-center items-start pt-10 pb-10">
                    <div className="w-full max-w-md bg-white shadow-xl rounded-3xl overflow-hidden border border-gray-100 min-h-[800px] relative flex flex-col">
                        
                        {step !== 'intro' && (
                        <div className="w-full h-2 bg-gray-100">
                            <div 
                                className="h-full bg-blue-500 transition-all duration-500 ease-out"
                                style={{ width: `${getProgress()}%` }}
                            ></div>
                        </div>
                        )}

                        {step === 'intro' && (
                        <div className="flex-1 flex flex-col items-center justify-center p-8 text-center bg-gradient-to-b from-blue-50 to-white">
                            <div className="w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center mb-6 animate-bounce">
                                <span className="text-4xl">ğŸš€</span>
                            </div>
                            <h1 className="text-3xl font-bold text-gray-900 mb-2">Project 45</h1>
                            <p className="text-gray-500 mb-8">45ì‚´ì˜ ë‚´ ì¸ìƒ ê°€ê²©í‘œë¥¼<br/>ë¯¸ë¦¬ í™•ì¸í•´ ë³´ì„¸ìš”!</p>
                            
                            <div className="w-full mb-6">
                                <label className="block text-left text-sm font-bold text-gray-700 mb-2 pl-1">ë¯¸ë˜ì˜ ë‚´ ì´ë¦„</label>
                                <input 
                                    type="text" 
                                    placeholder="ì˜ˆ: ì–µë§Œì¥ì ê¹€ì½”ë”©"
                                    className="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition"
                                    onChange={(e) => setUser({...user, name: e.target.value})}
                                />
                            </div>

                            <button 
                                onClick={() => user.name ? setStep('dream') : alert('ë©‹ì§„ ë‹‰ë„¤ì„ì„ ì§€ì–´ì£¼ì„¸ìš”!')}
                                className="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-xl shadow-lg transform transition active:scale-95 flex items-center justify-center gap-2"
                            >
                                íƒ€ì„ë¨¸ì‹  íƒ‘ìŠ¹í•˜ê¸° <ArrowRight size={20}/>
                            </button>
                        </div>
                        )}

                        {step === 'dream' && (
                        <DreamBoard 
                            user={user} 
                            setUser={setUser} 
                            onNext={calculateCost} 
                            onBack={() => setStep('intro')}
                            housingOptions={HOUSING_OPTIONS}
                            carOptions={CAR_OPTIONS}
                            lifeLevels={LIFE_LEVELS}
                        />
                        )}

                        {step === 'receipt' && (
                        <Receipt 
                            user={user} 
                            result={result} 
                            onNext={() => setStep('match')}
                            onBack={() => setStep('dream')}
                            onRetry={() => setStep('dream')}
                        />
                        )}

                        {step === 'match' && (
                        <CareerMatch 
                            result={result} 
                            jobData={JOB_DATA}
                            onSelect={(job) => {
                                setSelectedJob(job);
                                setStep('mission');
                            }}
                            onBack={() => setStep('receipt')}
                        />
                        )}

                        {step === 'mission' && selectedJob && (
                        <MissionCard 
                            user={user}
                            job={selectedJob} 
                            onShare={() => alert('ì¹œêµ¬ì—ê²Œ ê³µìœ í•  ìˆ˜ ìˆëŠ” ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! (ê°€ìƒ)')}
                            onBack={() => setStep('match')}
                        />
                        )}

                    </div>
                </div>
            );
        }

        // --- í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ë“¤ ---

        function DreamBoard({ user, setUser, onNext, onBack, housingOptions, carOptions, lifeLevels }) {
            const [page, setPage] = useState(1); 

            useEffect(() => {
                if (window.lucide) window.lucide.createIcons();
            }, [page]);

            const nextPage = () => {
                if (page === 1 && !user.house) return alert('ì‚´ê³  ì‹¶ì€ ì§‘ì„ ê³¨ë¼ì£¼ì„¸ìš”!');
                if (page === 2 && !user.car) return alert('íƒ€ê³  ì‹¶ì€ ì°¨ë¥¼ ê³¨ë¼ì£¼ì„¸ìš”!');
                if (page < 3) setPage(page + 1);
                else onNext();
            };

            const handleBack = () => {
                if (page > 1) setPage(page - 1);
                else onBack();
            };

            return (
                <div className="flex-1 flex flex-col p-6">
                    <div className="flex justify-between items-center mb-6">
                        <div className="flex items-center gap-2">
                        <button onClick={handleBack} className="p-2 -ml-2 text-gray-400 hover:text-gray-900 rounded-full hover:bg-gray-100 transition">
                            <ArrowLeft size={24} />
                        </button>
                        <h2 className="text-xl font-bold text-gray-900 leading-tight">
                            {page === 1 && "ì–´ë””ì„œ ì‚´ê³  ì‹¶ë‚˜ìš”?"}
                            {page === 2 && "ë¬´ì—‡ì„ íƒ€ê³  ê°ˆê¹Œìš”?"}
                            {page === 3 && "ì–´ë–¤ ìƒí™œì„ í• ê¹Œìš”?"}
                        </h2>
                        </div>
                        <span className="text-xs font-medium text-gray-400 bg-gray-100 px-2 py-1 rounded-full">Step {page}/3</span>
                    </div>

                    <div className="flex-1 overflow-y-auto pb-20 scrollbar-hide">
                        {page === 1 && (
                        <div className="grid grid-cols-1 gap-4">
                            {housingOptions.map((house) => (
                            <SelectionCard 
                                key={house.id} 
                                title={house.title} 
                                emoji={house.img}
                                priceDesc={`ì•½ ${house.price / 100000000}ì–µ ì›`}
                                subDesc={house.desc}
                                isSelected={user.house?.id === house.id}
                                onClick={() => setUser({...user, house: house})}
                            />
                            ))}
                        </div>
                        )}

                        {page === 2 && (
                        <div className="grid grid-cols-2 gap-3">
                            {carOptions.map((car) => (
                            <div 
                                key={car.id}
                                onClick={() => setUser({...user, car: car})}
                                className={`cursor-pointer p-4 rounded-2xl border-2 transition-all duration-200 flex flex-col items-center text-center gap-2
                                ${user.car?.id === car.id ? 'border-blue-500 bg-blue-50 ring-2 ring-blue-200' : 'border-gray-100 bg-white hover:border-blue-300'}`}
                            >
                                <div className="text-4xl mb-1">{car.img}</div>
                                <h3 className="font-bold text-gray-800 text-sm">{car.title}</h3>
                                <p className="text-xs text-gray-500">{car.desc}</p>
                            </div>
                            ))}
                        </div>
                        )}

                        {page === 3 && (
                        <div className="space-y-8 px-2">
                            <div className="text-center mb-4">
                            <span className="text-6xl mb-4 block">
                                {lifeLevels[user.life-1].level === 1 && 'ğŸœ'}
                                {lifeLevels[user.life-1].level === 2 && 'ğŸ'}
                                {lifeLevels[user.life-1].level === 3 && 'ğŸ¥©'}
                            </span>
                            <p className="text-lg font-bold text-blue-600">{lifeLevels[user.life-1].label}</p>
                            <p className="text-gray-500 text-sm mt-1">{lifeLevels[user.life-1].desc}</p>
                            </div>
                            
                            <input 
                                type="range" 
                                min="1" 
                                max="3" 
                                step="1" 
                                value={user.life}
                                onChange={(e) => setUser({...user, life: parseInt(e.target.value)})}
                                className="w-full h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600"
                            />
                            <div className="flex justify-between text-xs text-gray-400 px-1">
                                <span>ì•Œëœ°í˜•</span>
                                <span>ê· í˜•í˜•</span>
                                <span>í”Œë ‰ìŠ¤</span>
                            </div>
                            <div className="bg-gray-50 p-4 rounded-xl text-sm text-gray-600 mt-6">
                                <p>ğŸ’¡ <b>Tip:</b> ìˆ¨ë§Œ ì‰¬ì–´ë„ ë‚˜ê°€ëŠ” ëˆ(ì„¸ê¸ˆ, ë³´í—˜ë£Œ)ë„ ìë™ìœ¼ë¡œ ê³„ì‚°ë¼ìš”.</p>
                            </div>
                        </div>
                        )}
                    </div>

                    <div className="fixed bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-white via-white to-transparent max-w-md mx-auto">
                        <button 
                            onClick={nextPage}
                            className="w-full bg-black text-white font-bold py-4 rounded-xl shadow-lg active:scale-95 transition"
                        >
                            {page === 3 ? 'ê³„ì‚° ê²°ê³¼ ë³´ê¸° ğŸ§¾' : 'ë‹¤ìŒìœ¼ë¡œ'}
                        </button>
                    </div>
                </div>
            );
        }

        function SelectionCard({ title, emoji, priceDesc, subDesc, isSelected, onClick }) {
            return (
                <div 
                onClick={onClick}
                className={`relative cursor-pointer p-5 rounded-2xl border-2 transition-all duration-200 flex items-center gap-4
                    ${isSelected ? 'border-blue-500 bg-blue-50 ring-2 ring-blue-200' : 'border-gray-100 bg-white hover:border-blue-300'}`}
                >
                <div className="text-4xl">{emoji}</div>
                <div>
                    <h3 className="font-bold text-gray-900">{title}</h3>
                    <p className="text-sm text-blue-600 font-medium">{priceDesc}</p>
                    <p className="text-xs text-gray-400 mt-1">{subDesc}</p>
                </div>
                {isSelected && <div className="absolute top-4 right-4 text-blue-500"><CheckCircle size={20} className="text-blue-500" fill="currentColor" stroke="white" /></div>}
                </div>
            );
        }

        function Receipt({ user, result, onNext, onBack, onRetry }) {
            const [showTaxModal, setShowTaxModal] = useState(false);

            useEffect(() => {
                if (window.lucide) window.lucide.createIcons();
            }, []);

            return (
                <div className="flex-1 flex flex-col p-6 bg-gray-100 relative">
                
                <div className="flex items-center mb-4">
                    <button onClick={onBack} className="p-2 -ml-2 text-gray-500 hover:text-gray-900 rounded-full hover:bg-gray-200 transition">
                        <ArrowLeft size={24} />
                    </button>
                    <span className="ml-2 font-bold text-gray-500 text-sm">ë‹¤ì‹œ ì„ íƒí•˜ê¸°</span>
                </div>

                <div className="bg-white p-6 rounded-b-xl shadow-sm border-b-4 border-dashed border-gray-300 relative mx-2 animate-slide-down">
                    <div className="text-center mb-6">
                    <p className="text-gray-400 text-xs uppercase tracking-widest mb-1">Receipt for {user.name}</p>
                    <h2 className="text-2xl font-bold text-gray-900">45ì„¸ ì¸ìƒ ê²¬ì ì„œ</h2>
                    </div>

                    <div className="space-y-3 mb-6">
                    <ReceiptRow label="ğŸ  ì£¼ê±°ë¹„ (ëŒ€ì¶œìƒí™˜)" value={user.house.monthlyCost} />
                    <ReceiptRow label="ğŸš— ì°¨ëŸ‰ ìœ ì§€ë¹„" value={user.car.monthlyCost} />
                    <ReceiptRow label="âœˆï¸ ìƒí™œ/ì—¬ê°€ë¹„" value={LIFE_LEVELS[user.life-1].monthlyCost} />
                    <ReceiptRow label="ğŸ¦ ì €ì¶• ë° ì„¸ê¸ˆ" value={100} isGray />
                    </div>

                    <div className="border-t-2 border-gray-900 pt-4 mb-2">
                    <div className="flex justify-between items-end">
                        <span className="font-bold text-lg">ì›” í•„ìš” ì†Œë“</span>
                        <span className="font-black text-3xl text-blue-600">{result.monthlyNeed}ë§Œì›</span>
                    </div>
                    <p className="text-right text-sm text-gray-500 mt-1">
                        (ì—°ë´‰ í™˜ì‚° ì‹œ: ì•½ <span className="font-bold text-gray-800">{result.yearNeed / 100}ì–µ {result.yearNeed % 100 > 0 ? result.yearNeed % 100+'ë§Œ' : ''}ì›</span>)
                    </p>
                    </div>
                </div>

                <div className="mt-6 space-y-3 px-2">
                    <button 
                        onClick={() => setShowTaxModal(true)}
                        className="w-full py-3 bg-white border border-gray-200 rounded-xl text-sm font-medium text-gray-600 hover:bg-gray-50 flex items-center justify-center gap-2"
                    >
                        <DollarSign size={16}/> ì„¸ê¸ˆì´ ì™œ ì´ë ‡ê²Œ ë§ì•„ìš”?
                    </button>

                    <button 
                        onClick={onRetry}
                        className="w-full py-3 bg-white border border-gray-200 rounded-xl text-sm font-medium text-gray-600 hover:bg-gray-50 flex items-center justify-center gap-2"
                    >
                        <RefreshCw size={16}/> ë„ˆë¬´ ë¹„ì‹¸ìš”! ì´ˆê¸°í™”
                    </button>

                    <button 
                        onClick={onNext}
                        className="w-full py-4 bg-blue-600 text-white font-bold rounded-xl shadow-lg mt-4 active:scale-95 transition"
                    >
                        ì´ ëˆ ë²Œ ìˆ˜ ìˆëŠ” ì§ì—… ì°¾ê¸° ğŸ‘‰
                    </button>
                </div>

                {showTaxModal && (
                    <div className="absolute inset-0 bg-black/50 flex items-center justify-center p-6 z-50">
                    <div className="bg-white p-6 rounded-2xl max-w-sm w-full">
                        <h3 className="text-xl font-bold mb-2">ì„¸ê¸ˆì˜ ë¹„ë°€ ğŸ¤«</h3>
                        <p className="text-gray-600 text-sm mb-4 leading-relaxed">
                        ì—°ë´‰ì´ 1ì–µì´ë¼ê³  í†µì¥ì— 1ì–µì´ ë‹¤ ë“¤ì–´ì˜¤ì§€ ì•Šì•„ìš”.<br/>
                        êµ­ê°€ ìš´ì˜ì„ ìœ„í•œ <b>ì†Œë“ì„¸</b>ì™€ ë¯¸ë˜ë¥¼ ìœ„í•œ <b>êµ­ë¯¼ì—°ê¸ˆ</b>, ì•„í”Œ ë•Œë¥¼ ëŒ€ë¹„í•œ <b>ê±´ê°•ë³´í—˜</b> ë“±ì„ ë¯¸ë¦¬ ë‚´ì•¼ í•˜ê±°ë“ ìš”. <br/><br/>
                        ë§ì´ ë²Œìˆ˜ë¡ ì„¸ê¸ˆë„ ë§ì´ ë‚¸ë‹µë‹ˆë‹¤! (ë…¸ë¸”ë ˆìŠ¤ ì˜¤ë¸”ë¦¬ì£¼ âœ¨)
                        </p>
                        <button 
                            onClick={() => setShowTaxModal(false)}
                            className="w-full bg-gray-900 text-white py-3 rounded-xl font-bold"
                        >
                            ì•„í•˜, ì´í•´í–ˆì–´ìš”!
                        </button>
                    </div>
                    </div>
                )}
                </div>
            );
        }

        function ReceiptRow({ label, value, isGray }) {
            return (
                <div className={`flex justify-between items-center ${isGray ? 'text-gray-400' : 'text-gray-700'}`}>
                <span className="text-sm font-medium">{label}</span>
                <span className="font-bold">{value}ë§Œì›</span>
                </div>
            );
        }

        function CareerMatch({ result, jobData, onSelect, onBack }) {
            const [filterType, setFilterType] = useState('all'); 

            useEffect(() => {
                if (window.lucide) window.lucide.createIcons();
            }, [filterType]);

            const matchedJobs = jobData.filter(job => {
                const isSalaryPossible = result.yearNeed <= job.maxSal * 1.2; 
                if (filterType === 'all') return isSalaryPossible;
                if (filterType === 'people') return isSalaryPossible && (job.type === 'social' || job.style === 'people');
                if (filterType === 'logic') return isSalaryPossible && (job.type === 'logic' || job.type === 'tech');
                if (filterType === 'creative') return isSalaryPossible && (job.type === 'art' || job.style === 'creative');
                return false;
            });

            return (
                <div className="flex-1 flex flex-col p-6 bg-white">
                <div className="flex items-center gap-2 mb-6">
                    <button onClick={onBack} className="p-2 -ml-2 text-gray-500 hover:text-gray-900 rounded-full hover:bg-gray-100 transition">
                        <ArrowLeft size={24} />
                    </button>
                    <div>
                    <h2 className="text-xl font-bold text-gray-900">ì§ì—… ë§¤ì¹­ì†Œ ğŸ’¼</h2>
                    <p className="text-gray-500 text-xs">
                        ëª©í‘œ ì—°ë´‰ <span className="text-blue-600 font-bold">{Math.round(result.yearNeed/1000)*1000/100}ì–µ</span>ì› ë‹¬ì„± ê°€ëŠ¥!
                    </p>
                    </div>
                </div>

                <div className="flex gap-2 overflow-x-auto pb-4 scrollbar-hide mb-2">
                    {['all', 'people', 'logic', 'creative'].map(type => (
                    <button
                        key={type}
                        onClick={() => setFilterType(type)}
                        className={`px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap transition
                        ${filterType === type ? 'bg-black text-white' : 'bg-gray-100 text-gray-500 hover:bg-gray-200'}`}
                    >
                        {type === 'all' && 'ì „ì²´ ë³´ê¸°'}
                        {type === 'people' && 'ì‚¬ëŒì´ ì¢‹ì•„'}
                        {type === 'logic' && 'ë…¼ë¦¬ê°€ ì¢‹ì•„'}
                        {type === 'creative' && 'ì°½ì‘ì´ ì¢‹ì•„'}
                    </button>
                    ))}
                </div>

                <div className="flex-1 overflow-y-auto pb-4 space-y-4">
                    {matchedJobs.length > 0 ? (
                    matchedJobs.map(job => (
                        <div 
                        key={job.id} 
                        onClick={() => onSelect(job)}
                        className="group cursor-pointer border border-gray-100 rounded-2xl p-5 hover:border-blue-500 hover:shadow-md transition bg-white"
                        >
                        <div className="flex justify-between items-start mb-2">
                            <span className={`px-2 py-1 rounded-md text-xs font-bold 
                            ${job.type === 'logic' ? 'bg-purple-100 text-purple-600' : 
                                job.type === 'art' ? 'bg-pink-100 text-pink-600' : 
                                'bg-green-100 text-green-600'}`}>
                            {job.type === 'logic' && 'ë…¼ë¦¬/ë¶„ì„'}
                            {job.type === 'art' && 'ì˜ˆìˆ /ì°½ì‘'}
                            {job.type === 'social' && 'ì†Œí†µ/ë¦¬ë”ì‹­'}
                            {job.type === 'tech' && 'ê¸°ìˆ /ê³µí•™'}
                            </span>
                            <span className="text-xs text-gray-400">í‰ê·  ì—°ë´‰ {job.minSal/100}~{job.maxSal/100}ì–µ</span>
                        </div>
                        <h3 className="text-lg font-bold text-gray-900 group-hover:text-blue-600 transition">{job.name}</h3>
                        <p className="text-sm text-gray-500 mt-1">{job.desc}</p>
                        <div className="mt-3 flex items-center text-blue-500 text-sm font-bold opacity-0 group-hover:opacity-100 transition">
                            ë¯¸ì…˜ í™•ì¸í•˜ê¸° <ArrowRight size={16} className="ml-1"/>
                        </div>
                        </div>
                    ))
                    ) : (
                    <div className="text-center py-10 bg-gray-50 rounded-2xl">
                        <p className="text-gray-500 mb-2">ì¡°ê±´ì— ë§ëŠ” ì§ì—…ì„ ì°¾ê¸° ì–´ë ¤ì›Œìš” ğŸ˜…</p>
                        <p className="text-sm text-gray-400">ìƒí™œë¹„ ëª©í‘œë¥¼ ì¡°ê¸ˆ ë‚®ì¶°ë³´ê±°ë‚˜<br/>ë‹¤ë¥¸ ì„±í–¥ì„ ì„ íƒí•´ë³´ì„¸ìš”!</p>
                    </div>
                    )}
                </div>
                </div>
            );
        }

        function MissionCard({ user, job, onShare, onBack }) {
            useEffect(() => {
                if (window.lucide) window.lucide.createIcons();
            }, []);

            return (
                <div className="flex-1 flex flex-col p-6 bg-blue-600 text-white relative">
                <button 
                    onClick={onBack} 
                    className="absolute top-6 left-6 p-2 -ml-2 text-blue-200 hover:text-white rounded-full hover:bg-white/10 transition"
                >
                    <ArrowLeft size={24} />
                </button>

                <div className="flex-1 flex flex-col items-center justify-center text-center mt-8">
                    <div className="bg-white/10 p-4 rounded-full mb-6">
                    <Zap size={48} className="text-yellow-300 fill-current"/>
                    </div>
                    
                    <h2 className="text-2xl font-bold mb-2">ì˜¤ëŠ˜ì˜ ë¯¸ì…˜ ë„ì°©!</h2>
                    <p className="text-blue-100 mb-8">
                    ë¯¸ë˜ì˜ <b>{job.name}</b> {user.name}ë‹˜,<br/>
                    ì§€ê¸ˆ ë‹¹ì¥ ì‹œì‘í•  ìˆ˜ ìˆëŠ” ì¼ì´ ìˆì–´ìš”.
                    </p>

                    <div className="w-full bg-white text-gray-800 rounded-2xl p-6 shadow-xl text-left space-y-4">
                    <h3 className="font-bold text-gray-500 text-xs uppercase tracking-wider border-b pb-2 mb-2">Daily Missions</h3>
                    
                    {job.missions.map((mission, idx) => (
                        <label key={idx} className="flex items-start gap-3 cursor-pointer group">
                        <input type="checkbox" className="w-5 h-5 mt-0.5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"/>
                        <span className="text-sm group-hover:text-blue-600 transition leading-snug">
                            <span className="font-bold text-blue-500 mr-1">Lv.{idx+1}</span>
                            {mission}
                        </span>
                        </label>
                    ))}
                    </div>
                </div>

                <div className="mt-8 space-y-3">
                    <button 
                    onClick={onShare}
                    className="w-full bg-white text-blue-600 font-bold py-4 rounded-xl shadow-lg active:scale-95 transition flex items-center justify-center gap-2"
                    >
                    ì¹œêµ¬ë“¤ì—ê²Œ ìë‘í•˜ê¸° <Heart size={18} className="text-red-500 fill-current"/>
                    </button>
                    <p className="text-center text-xs text-blue-200 mt-4 opacity-70">
                    Project 45 â€¢ Life Reverse Engineering
                    </p>
                </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<Project45 />);
    </script>
</body>
</html>
