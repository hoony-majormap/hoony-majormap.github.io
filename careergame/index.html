<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Career Rush: Infinite | 학교 대항 진로 퀴즈 게임</title>
    <meta name="description" content="우리 학교의 명예를 걸고 펼치는 실시간 진로 퀴즈 배틀! 연속 콤보로 점수를 쌓고 전국 랭킹 1위에 도전하세요.">
    
    <!-- Open Graph / Facebook / Kakao -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Career Rush: Infinite">
    <meta property="og:description" content="우리 학교 랭킹을 올려라! 실시간 진로 퀴즈 대항전">
    <meta property="og:image" content="https://images.unsplash.com/photo-1546410531-bb4caa6b424d?q=80&w=1171&auto=format&fit=crop">

    <!-- Favicon (Emoji) -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>⚡</text></svg>">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM (Production Version for better performance) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel (For converting JSX in browser) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap');
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            -webkit-tap-highlight-color: transparent;
            overscroll-behavior: none; /* Prevent pull-to-refresh on mobile */
        }

        /* Custom Animations */
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fade-in 0.5s ease-out forwards;
        }
        
        @keyframes bounce-subtle {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-3px); }
        }
        .animate-bounce-subtle {
            animation: bounce-subtle 1s infinite;
        }

        @keyframes ping-short {
            0% { transform: scale(0.8); opacity: 1; }
            100% { transform: scale(1.5); opacity: 0; }
        }
        .animate-ping-short {
            animation: ping-short 0.5s cubic-bezier(0, 0, 0.2, 1) forwards;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        .animate-shake {
            animation: shake 0.3s ease-in-out;
        }

        .pb-safe {
            padding-bottom: env(safe-area-inset-bottom);
        }
        
        /* Custom Scrollbar for dark theme */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #0f172a; 
        }
        ::-webkit-scrollbar-thumb {
            background: #334155; 
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #475569; 
        }
    </style>
</head>
<body class="bg-slate-950 text-slate-100 h-screen overflow-hidden select-none">
    <div id="root" class="h-full w-full"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- Icon Components (Inline SVGs to replace Lucide imports) ---
        const Trophy = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>
        );
        const Users = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
        );
        const Zap = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
        );
        const MessageSquare = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
        );
        const Flame = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg>
        );
        const CheckCircle = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
        );
        const XCircle = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>
        );
        const Send = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
        );
        const ArrowRight = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
        );

        // --- Mock Data ---
        const SCHOOL_RANKINGS = [
            { name: '서울고', score: 154200, active: 124, trend: 'up' },
            { name: '부산과학고', score: 148500, active: 98, trend: 'down' },
            { name: '광주제일고', score: 132000, active: 85, trend: 'same' },
            { name: '대전예술고', score: 110500, active: 110, trend: 'up' },
            { name: '세종국제고', score: 98000, active: 45, trend: 'up' },
        ];

        const COMMUNITY_POSTS = [
            { id: 1, school: '서울고', user: '익명1', content: '야 우리 학교 1등 가자! 지금 접속해라', time: '방금 전', likes: 12 },
            { id: 2, school: '대전예술고', user: '익명2', content: '디자인 쪽 진로 질문 있어. 포트폴리오 준비 어떻게 함?', time: '5분 전', likes: 4 },
            { id: 3, school: '부산과학고', user: '익명3', content: '오늘자 개발자 퀴즈 너무 어려운 거 아니냐;;', time: '12분 전', likes: 8 },
        ];

        const QUIZ_POOL = [
            { category: '개발', q: '서버와 데이터를 주고받을 때 사용하는 규약은?', o: ['HTTP', 'HTML', 'CSS', 'JS'], a: 0 },
            { category: '디자인', q: '색의 3원색이 아닌 것은?', o: ['빨강', '파랑', '노랑', '초록'], a: 3 },
            { category: '경영', q: '주식회사의 주인은 누구인가?', o: ['CEO', '직원', '주주', '정부'], a: 2 },
            { category: '마케팅', q: 'SEO는 무엇의 약자인가?', o: ['Search Engine Optimization', 'Save Energy Option', 'Super Engine Oil', 'Service Executive Officer'], a: 0 },
            { category: '인공지능', q: 'ChatGPT의 기반이 되는 모델은?', o: ['Transformer', 'CNN', 'RNN', 'GAN'], a: 0 },
        ];

        // --- Components ---

        const TabBar = ({ activeTab, onTabChange }) => {
            const tabs = [
                { id: 'game', label: '게임', icon: Zap },
                { id: 'rank', label: '랭킹', icon: Trophy },
                { id: 'community', label: '커뮤니티', icon: MessageSquare },
            ];

            return (
                <div className="absolute bottom-0 left-0 right-0 h-16 bg-slate-900 border-t border-slate-800 flex justify-around items-center z-50 pb-safe">
                    {tabs.map((tab) => {
                        const Icon = tab.icon;
                        const isActive = activeTab === tab.id;
                        return (
                            <button
                                key={tab.id}
                                onClick={() => onTabChange(tab.id)}
                                className={`flex flex-col items-center justify-center w-full h-full transition-all ${
                                isActive ? 'text-cyan-400' : 'text-slate-500 hover:text-slate-300'
                                }`}
                            >
                                <Icon size={isActive ? 24 : 20} className={isActive ? 'animate-bounce-subtle' : ''} />
                                <span className="text-[10px] font-bold mt-1">{tab.label}</span>
                            </button>
                        );
                    })}
                </div>
            );
        };

        // --- Main App ---

        function CareerRushApp() {
            const [isLoggedIn, setIsLoggedIn] = useState(false);
            const [mySchool, setMySchool] = useState('');
            const [activeTab, setActiveTab] = useState('game');

            // Game State
            const [gameState, setGameState] = useState('ready'); // ready, playing, result
            const [currentQuizIndex, setCurrentQuizIndex] = useState(0);
            const [combo, setCombo] = useState(0);
            const [score, setScore] = useState(0);
            const [timer, setTimer] = useState(10);
            const [feedback, setFeedback] = useState(null); // 'correct' or 'wrong'

            // Refs for timer
            const timerRef = useRef(null);

            const handleLogin = (school) => {
                if (!school) return;
                setMySchool(school);
                setIsLoggedIn(true);
            };

            // --- Game Logic ---

            const startGame = () => {
                setGameState('playing');
                setScore(0);
                setCombo(0);
                setTimer(10);
                setCurrentQuizIndex(Math.floor(Math.random() * QUIZ_POOL.length));
                setFeedback(null);
            };

            useEffect(() => {
                if (gameState === 'playing' && !feedback) {
                    timerRef.current = setInterval(() => {
                        setTimer((prev) => {
                            if (prev <= 1) {
                                handleGameOver();
                                return 0;
                            }
                            return prev - 1;
                        });
                    }, 1000);
                }
                return () => clearInterval(timerRef.current);
            }, [gameState, feedback]);

            const handleAnswer = (idx) => {
                clearInterval(timerRef.current);
                const isCorrect = idx === QUIZ_POOL[currentQuizIndex].a;

                if (isCorrect) {
                    setFeedback('correct');
                    setScore((prev) => prev + 100 + (combo * 10)); // Combo bonus
                    setCombo((prev) => prev + 1);
                    setTimeout(() => {
                        nextQuestion();
                    }, 800);
                } else {
                    setFeedback('wrong');
                    setTimeout(() => {
                        handleGameOver();
                    }, 1000);
                }
            };

            const nextQuestion = () => {
                setFeedback(null);
                setTimer(10); // Reset Timer
                setCurrentQuizIndex((prev) => (prev + 1) % QUIZ_POOL.length);
            };

            const handleGameOver = () => {
                clearInterval(timerRef.current);
                setGameState('result');
            };

            // --- Render Sections ---

            const renderLogin = () => (
                <div className="flex flex-col items-center justify-center h-full p-8 space-y-8 animate-fade-in bg-slate-950">
                    <div className="text-center">
                        <h1 className="text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-600 italic tracking-tighter">
                            CAREER<br/>RUSH
                        </h1>
                        <p className="text-slate-400 mt-2 font-medium">우리 학교의 명예를 걸고.</p>
                    </div>
                    <div className="w-full space-y-4">
                        <div className="bg-slate-900 p-6 rounded-2xl border border-slate-800">
                            <label className="text-xs font-bold text-slate-500 mb-2 block">SCHOOL NAME</label>
                            <input 
                                id="schoolInput"
                                type="text" 
                                placeholder="학교 검색 (예: 서울고)" 
                                className="w-full bg-slate-800 text-white p-4 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-500 transition-all font-bold"
                                onKeyPress={(e) => e.key === 'Enter' && handleLogin(e.target.value || '서울고')}
                            />
                        </div>
                        <button 
                            onClick={() => handleLogin(document.getElementById('schoolInput').value || '서울고')}
                            className="w-full py-4 bg-cyan-500 hover:bg-cyan-400 text-slate-900 font-black rounded-xl text-lg shadow-[0_0_20px_rgba(6,182,212,0.5)] transition-all active:scale-95"
                        >
                            입장하기
                        </button>
                    </div>
                </div>
            );

            const renderGameTab = () => {
                if (gameState === 'ready') {
                    return (
                        <div className="h-full flex flex-col items-center justify-center p-6 text-center space-y-8">
                            <div className="relative">
                                <div className="absolute inset-0 bg-cyan-500 blur-3xl opacity-20 rounded-full"></div>
                                <Zap size={80} className="text-cyan-400 relative z-10 animate-pulse" />
                            </div>
                            <div>
                                <h2 className="text-3xl font-black text-white">READY?</h2>
                                <p className="text-slate-400 mt-2">연속으로 정답을 맞혀 콤보를 쌓으세요.<br/>한 번이라도 틀리면 끝납니다.</p>
                            </div>
                            <button 
                                onClick={startGame}
                                className="w-full py-5 bg-gradient-to-r from-cyan-500 to-blue-600 rounded-2xl font-black text-xl text-white shadow-lg transform transition active:scale-95"
                            >
                                START QUIZ
                            </button>
                        </div>
                    );
                }

                if (gameState === 'result') {
                    return (
                        <div className="h-full flex flex-col items-center justify-center p-6 text-center animate-fade-in">
                            <Trophy size={64} className="text-yellow-400 mb-4" />
                            <h2 className="text-4xl font-black text-white mb-2">{score.toLocaleString()} PTS</h2>
                            <div className="flex gap-2 mb-8">
                                <span className="bg-slate-800 px-3 py-1 rounded-lg text-slate-300 text-sm font-bold">최대 콤보 {combo}</span>
                                <span className="bg-cyan-900/50 px-3 py-1 rounded-lg text-cyan-300 text-sm font-bold">{mySchool} 기여 완료</span>
                            </div>
                            <button 
                                onClick={() => setGameState('ready')}
                                className="px-8 py-3 bg-slate-800 text-white font-bold rounded-xl border border-slate-700 active:bg-slate-700"
                            >
                                다시 도전하기
                            </button>
                        </div>
                    );
                }

                // Playing State
                const quiz = QUIZ_POOL[currentQuizIndex];
                return (
                    <div className="h-full flex flex-col p-6 relative">
                        {/* Header Stats */}
                        <div className="flex justify-between items-end mb-8">
                            <div>
                                <div className="text-xs font-bold text-slate-500 mb-1">CURRENT SCORE</div>
                                <div className="text-3xl font-black text-white">{score}</div>
                            </div>
                            <div className="flex flex-col items-end">
                                <div className="flex items-center gap-1 text-orange-400 font-black text-xl italic animate-bounce">
                                    <Flame size={20} fill="currentColor" /> {combo} COMBO
                                </div>
                                <div className={`text-sm font-bold mt-1 ${timer <= 3 ? 'text-red-500' : 'text-slate-400'}`}>
                                    남은 시간 {timer}초
                                </div>
                            </div>
                        </div>

                        {/* Question Card */}
                        <div className="flex-1 flex flex-col justify-center">
                            <div className="bg-slate-800/50 backdrop-blur-sm border border-slate-700 p-6 rounded-2xl mb-6 shadow-xl relative overflow-hidden">
                                {/* Timer Bar */}
                                <div className="absolute top-0 left-0 h-1 bg-cyan-500 transition-all duration-1000 ease-linear" style={{ width: `${(timer/10)*100}%` }}></div>
                                
                                <span className="inline-block px-3 py-1 bg-slate-700 rounded-full text-xs font-bold text-cyan-300 mb-4">
                                    {quiz.category}
                                </span>
                                <h3 className="text-2xl font-bold text-white leading-relaxed">
                                    {quiz.q}
                                </h3>
                            </div>

                            {/* Options */}
                            <div className="grid grid-cols-1 gap-3">
                                {quiz.o.map((option, idx) => {
                                    let btnStyle = "bg-slate-800 border-slate-700 hover:bg-slate-700 text-slate-200";
                                    if (feedback === 'correct' && idx === quiz.a) btnStyle = "bg-green-500 border-green-600 text-white";
                                    if (feedback === 'wrong' && idx !== quiz.a) btnStyle = "opacity-50";
                                    if (feedback === 'wrong' && idx === quiz.a) btnStyle = "bg-green-500 border-green-600 text-white"; // Show answer if wrong
                                    
                                    return (
                                        <button
                                            key={idx}
                                            disabled={feedback !== null}
                                            onClick={() => handleAnswer(idx)}
                                            className={`p-4 rounded-xl font-bold text-left border-2 transition-all active:scale-98 ${btnStyle}`}
                                        >
                                            {option}
                                        </button>
                                    );
                                })}
                            </div>
                        </div>

                        {/* Feedback Overlay */}
                        {feedback && (
                            <div className="absolute inset-0 flex items-center justify-center pointer-events-none z-20">
                                {feedback === 'correct' ? (
                                    <CheckCircle size={100} className="text-green-400 drop-shadow-2xl animate-ping-short" />
                                ) : (
                                    <XCircle size={100} className="text-red-500 drop-shadow-2xl animate-shake" />
                                )}
                            </div>
                        )}
                    </div>
                );
            };

            const renderRankTab = () => (
                <div className="h-full p-4 overflow-y-auto pb-20">
                    <div className="mb-6">
                        <h2 className="text-2xl font-black text-white">SCHOOL RANKING</h2>
                        <p className="text-slate-400 text-sm">실시간 전국 고교 대항전</p>
                    </div>

                    <div className="space-y-3">
                        {SCHOOL_RANKINGS.map((item, idx) => (
                            <div key={idx} className="bg-slate-800 p-4 rounded-xl border border-slate-700 flex items-center justify-between">
                                <div className="flex items-center gap-4">
                                    <div className={`w-8 h-8 rounded-lg flex items-center justify-center font-black text-lg ${idx === 0 ? 'bg-yellow-400 text-slate-900' : 'bg-slate-700 text-slate-400'}`}>
                                        {idx + 1}
                                    </div>
                                    <div>
                                        <div className="text-white font-bold">{item.name}</div>
                                        <div className="text-xs text-slate-500">{item.active}명 접속 중</div>
                                    </div>
                                </div>
                                <div className="text-right">
                                    <div className="text-cyan-400 font-bold">{item.score.toLocaleString()}</div>
                                    <div className="text-xs text-slate-500">점수</div>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );

            const renderCommunityTab = () => (
                <div className="h-full flex flex-col pb-20">
                    <div className="p-4 border-b border-slate-800 bg-slate-900/80 backdrop-blur z-10 sticky top-0">
                        <h2 className="text-xl font-black text-white">COMMUNITY</h2>
                        <div className="flex gap-2 mt-2">
                            <button className="px-3 py-1 rounded-full bg-cyan-600 text-white text-xs font-bold">전체</button>
                            <button className="px-3 py-1 rounded-full bg-slate-800 text-slate-400 text-xs font-bold">우리학교</button>
                        </div>
                    </div>

                    <div className="flex-1 overflow-y-auto p-4 space-y-4">
                        {COMMUNITY_POSTS.map((post) => (
                            <div key={post.id} className="bg-slate-800 p-4 rounded-xl border border-slate-700">
                                <div className="flex items-center gap-2 mb-2">
                                    <span className="px-2 py-0.5 rounded bg-slate-700 text-cyan-300 text-[10px] font-bold border border-slate-600">{post.school}</span>
                                    <span className="text-slate-400 text-xs font-bold">{post.user}</span>
                                    <span className="text-slate-600 text-[10px] ml-auto">{post.time}</span>
                                </div>
                                <p className="text-slate-200 text-sm font-medium leading-relaxed">{post.content}</p>
                                <div className="flex gap-4 mt-3">
                                    <button className="flex items-center gap-1 text-slate-500 text-xs font-bold hover:text-red-400 transition-colors">
                                        ♥ {post.likes}
                                    </button>
                                    <button className="flex items-center gap-1 text-slate-500 text-xs font-bold">
                                        댓글달기
                                    </button>
                                </div>
                            </div>
                        ))}
                    </div>

                    <div className="p-4 border-t border-slate-800 bg-slate-900 absolute bottom-16 left-0 right-0">
                        <div className="relative">
                            <input type="text" placeholder="우리 학교를 응원해주세요!" className="w-full bg-slate-800 text-white py-3 pl-4 pr-12 rounded-full border border-slate-700 focus:border-cyan-500 focus:outline-none text-sm" />
                            <button className="absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-cyan-500 rounded-full text-slate-900 hover:bg-cyan-400">
                                <Send size={14} />
                            </button>
                        </div>
                    </div>
                </div>
            );

            return (
                <div className="w-full h-full max-w-md mx-auto bg-slate-950 text-slate-100 overflow-hidden relative font-sans shadow-2xl">
                    {!isLoggedIn ? (
                        renderLogin()
                    ) : (
                        <React.Fragment>
                            <div className="h-full overflow-hidden">
                                {activeTab === 'game' && renderGameTab()}
                                {activeTab === 'rank' && renderRankTab()}
                                {activeTab === 'community' && renderCommunityTab()}
                            </div>
                            <TabBar activeTab={activeTab} onTabChange={setActiveTab} />
                        </React.Fragment>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<CareerRushApp />);
    </script>
</body>
</html>
